<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-wall.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-wall.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-jsxllPgZAX">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Ma Shan Zheng:300,300italic,400,400italic,700,700italic|JetBrains Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"thysrael.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"flat"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="一、默认方法1.1 总论这是 CPP 与 Java 的OOP 最不同的地方。对于 Java ，基本上是没有默认的行为的，因为所有的对象其实都是指针，所以只有被定义过的方法会用到，而没有被定义过的方法，我们一点也不担心它会在什么其他地方出现，比如: Student cnx;					&#x2F;&#x2F; 我们不担心 cnx 内部是怎样的，因为这个就是一个指针 Student qs &#x3D; cnx;				&#x2F;&#x2F; 我们不担">
<meta property="og:type" content="article">
<meta property="og:title" content="CPP设计-面向对象">
<meta property="og:url" content="https://thysrael.github.io/posts/a860c828/index.html">
<meta property="og:site_name" content="钟鼓楼">
<meta property="og:description" content="一、默认方法1.1 总论这是 CPP 与 Java 的OOP 最不同的地方。对于 Java ，基本上是没有默认的行为的，因为所有的对象其实都是指针，所以只有被定义过的方法会用到，而没有被定义过的方法，我们一点也不担心它会在什么其他地方出现，比如: Student cnx;					&#x2F;&#x2F; 我们不担心 cnx 内部是怎样的，因为这个就是一个指针 Student qs &#x3D; cnx;				&#x2F;&#x2F; 我们不担">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-05-09T11:00:50.000Z">
<meta property="article:modified_time" content="2025-08-15T12:16:47.755Z">
<meta property="article:author" content="Thysrael">
<meta property="article:tag" content="CPP设计">
<meta property="article:tag" content="S4课上">
<meta property="article:tag" content="知识总结">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://thysrael.github.io/posts/a860c828/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>CPP设计-面向对象 | 钟鼓楼</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="钟鼓楼" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
      <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/thysrael" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">钟鼓楼</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">钟楼瘦，鼓楼胖</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">31</span></a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">69</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">197</span></a>

  </li>
        <li class="menu-item menu-item-resource">

    <a href="/resource/" rel="section"><i class="fa fa-book fa-fw"></i>Resource</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>Links</a>

  </li>
        <li class="menu-item menu-item-roam">

    <a href="/obsidian-quartz/" rel="section"><i class="fa fa-sitemap fa-fw"></i>Roam</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://thysrael.github.io/posts/a860c828/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.png">
      <meta itemprop="name" content="Thysrael">
      <meta itemprop="description" content="Can you hear me ?">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="钟鼓楼">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CPP设计-面向对象
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-09 19:00:50" itemprop="dateCreated datePublished" datetime="2022-05-09T19:00:50+08:00">2022-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-08-15 20:16:47" itemprop="dateModified" datetime="2025-08-15T20:16:47+08:00">2025-08-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CPP%E8%AE%BE%E8%AE%A1/" itemprop="url" rel="index"><span itemprop="name">CPP设计</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>13 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="一、默认方法"><a href="#一、默认方法" class="headerlink" title="一、默认方法"></a>一、默认方法</h2><h3 id="1-1-总论"><a href="#1-1-总论" class="headerlink" title="1.1 总论"></a>1.1 总论</h3><p>这是 CPP 与 Java 的OOP 最不同的地方。对于 Java ，基本上是没有默认的行为的，因为所有的对象其实都是指针，所以只有被定义过的方法会用到，而没有被定义过的方法，我们一点也不担心它会在什么其他地方出现，比如:</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Student</span> cnx<span class="token punctuation">;</span>					<span class="token comment">// 我们不担心 cnx 内部是怎样的，因为这个就是一个指针</span>
<span class="token class-name">Student</span> qs <span class="token operator">=</span> cnx<span class="token punctuation">;</span>				<span class="token comment">// 我们不担心 qs 与 cnx 的关系，因为只不过是对象指针的赋值，而跟实际的两个 Student 没有关系</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// 我们不担心 qs 的字符串化，因为来自 Object 类</span>
classroom<span class="token punctuation">.</span><span class="token function">answerQuestion</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span>	<span class="token comment">// 我们不担心 qs 到底是怎么传入的，因为我们知道传入的就是一个指针</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
end of execution				<span class="token comment">// 我们不关心 qs 和 cnx 的释放，因为都是 JVM 负责的</span>
```​

但是对于 CPP 来说，这些就都是问题了。


```cpp
<span class="token class-name">Student</span> cnx<span class="token punctuation">;</span>					<span class="token comment">// 真的定义了一个 Student 对象，里面的内存情况是啥样的？</span>
<span class="token class-name">Student</span> qs <span class="token operator">=</span> cnx<span class="token punctuation">;</span>				<span class="token comment">// 真的将一个对象复制给了另一个对象，那么是怎么复制的？</span>
string s <span class="token operator">=</span> qs<span class="token punctuation">;</span>					<span class="token comment">// 发生了类型转换，这么多的类型，都是怎么转换的？</span>
<span class="token function">answerQuestion</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span>				<span class="token comment">// 我传进去的到底是个什么，我可以修改它吗？</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
end of execution				<span class="token comment">// 谁来释放 cnx 和 qs，没有人管一下吗？</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到正是因为 CPP 提供了强大的功能，导致在我们没有给我们的类进行任何设计的时候，给人的感觉就是完全不知道会发生什么？当然程序不会有任何二义性的东西存在，它一定会按照一定的规则去执行的。只不过这个规则被 CPP 隐藏起来了，导致我们入门的时候对于各种东西都十分迷茫。</p>
<p>与之相对的 Java，一是功能不那么强大，比如没有重载运算符之类的骚操作。一个是代码一般都可以溯源，比如来自 Object 之类的。总之让人还比较安心。</p>
<p>这一章讨论的就是 CPP 提供的默认方法。这些方法有一个特点，就是一旦我们自己定义了可以实现相似功能的方法，这些方法就会消失不见。</p>
<h3 id="1-2-默认构造函数"><a href="#1-2-默认构造函数" class="headerlink" title="1.2 默认构造函数"></a>1.2 默认构造函数</h3><p>当我们啥啥都没有定义的时候，CPP 会给我们提供一个默认构造函数，这个函数可以帮助我们让语句运行起来，比如下面的语句</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">void</span> <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Node a<span class="token punctuation">;</span>		<span class="token comment">// 可以直接这么写，然后就能跑</span>
	a<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>虽然没有构造函数，但是是可以运行的。</p>
<p>系统提供的默认构造函数大概长这样，大致意思就是啥都不干。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>并不是只有定义了一个无参构造器这个默认构造器才会失效，而是只要定义了一个构造器，这个构造器就会失效，比如加上这样的一个构造器，上面的代码就运行不了。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">,</span> <span class="token keyword">int</span> yy<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
	y <span class="token operator">=</span> yy<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="1-3-默认析构函数"><a href="#1-3-默认析构函数" class="headerlink" title="1.3 默认析构函数"></a>1.3 默认析构函数</h3><p>因为 CPP 没有 JVM 的自动回收对象的机制，所以对于 <code>new</code> 出的对象，他是没有办法回收的，所以我们需要手动的定义一个析构函数，方便在 <code>delete</code> 的时候调用。系统会默认提供一个，就是下面这样</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>同样啥都不干，这个其实已经很好了，因为对于一般的类，只要不在构造的时候 <code>new</code>，这个默认的构造器就已经足够了。</p>
<h3 id="1-4-复制构造函数和赋值运算符"><a href="#1-4-复制构造函数和赋值运算符" class="headerlink" title="1.4 复制构造函数和赋值运算符"></a>1.4 复制构造函数和赋值运算符</h3><p>因为我们会有这种操作</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Student qs<span class="token punctuation">;</span>
Student cnx <span class="token operator">=</span> qs<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>所以这种 <code>=</code> 号的行为是怎么定义的？有人会说，那我不用不就得了，但是有的时候虽然可以避免使用等于号，但是架不住一不小心传参啊</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">answerQuestion</span><span class="token punctuation">(</span>Student s<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	s<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">answerQuestion</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们知道其实是函数传参发生了一个这样的过程</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Student <span class="token function">s</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>也就类似于复制了，所以必须定义这种东西的行为，这种函数的声明如下</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Node <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">const</span> Node <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>但是具体的内容我不知道咋写，实现的功能就是一个“浅复制”，即数据成员都可以复制，但是如果数据成员是指针，那么指针指向的内容并不会被复制，但是数组会被完全拷贝。赋值运算符同理。</p>
<hr>
<h2 id="二、基本操作"><a href="#二、基本操作" class="headerlink" title="二、基本操作"></a>二、基本操作</h2><h3 id="2-1-定义一个对象"><a href="#2-1-定义一个对象" class="headerlink" title="2.1 定义一个对象"></a>2.1 定义一个对象</h3><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// 如果有无参构造器可以这样用</span>
Node a<span class="token punctuation">;</span>				
Node a <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Node <span class="token operator">*</span>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果是有参的构造器</span>
Node <span class="token function">a</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
Node a <span class="token operator">=</span> <span class="token function">Node</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
Node <span class="token operator">*</span>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-2-类的结构"><a href="#2-2-类的结构" class="headerlink" title="2.2 类的结构"></a>2.2 类的结构</h3><p>对于 CPP 的一个类，一般是一个头文件放类的声明，一个放类的实现。类的定义包括数据成员的声明（同时也是定义，但是不允许初始化，除非是枚举类或者常量）和方法的声明。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">//--------------- node.h ------------------//</span>

<span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//-------------- node.cpp -----------------//</span>

<span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
	y <span class="token operator">=</span> xx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	y <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-3-类的静态量和常量"><a href="#2-3-类的静态量和常量" class="headerlink" title="2.3 类的静态量和常量"></a>2.3 类的静态量和常量</h3><p>在类中有两种定义常量的方法，都十分方便，如下所示：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">enum</span><span class="token punctuation">{</span>aa <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> bb <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">void</span> <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> aa <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> bb <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>对于静态量，即可以被类的所有对象共享的变量（用 <code>static</code> 修饰）。静态值是不可以在类声明中初始化的，这是因为类声明只是描述了怎样分配内存，但是并没有实际分配内存。所以是没有办法给静态值初始化的，所以需要在外部给他进行初始化</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">enum</span><span class="token punctuation">{</span>aa <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> bb <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token keyword">int</span> Node<span class="token double-colon punctuation">::</span>num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意在外部进行定义的时候就不需要 <code>static</code> 关键字了。</p>
<h3 id="2-4-公有继承"><a href="#2-4-公有继承" class="headerlink" title="2.4 公有继承"></a>2.4 公有继承</h3><p>公有继承跟 Java 中的继承是类似的，具体的语法如下</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">DerivedClass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">BaseClass</span></span>
<span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>因为要先创造基类对象，然后再创造子类对象，所以需要用初始化列表来指定基类的构造器。</p>
<p>在具体的使用方面，私有的数据成员是无法使用的，公有的方法是可以使用的，跟 Java 类似。</p>
<h3 id="2-5-动态绑定"><a href="#2-5-动态绑定" class="headerlink" title="2.5 动态绑定"></a>2.5 动态绑定</h3><p>这个也与 Java 相似，基类的指针和引用都可以指向子类。所以当这种指针或者引用调用方法的时候，我们就需要区分到底是用的是子类的方法还是基类的方法。对于 Java 而言，如果指向的对象真的是子类的话，那么就一定会用子类的方法。但是对于 C++，这是一个有待商榷的事情。</p>
<p>只有当方法被声明成了 <code>virtual</code> 虚方法，才具有这种性质。<code>virtual</code> 关键字需要出现在父类和子类的方法声明中，只有都出现以后动态绑定直至才会发生作用。至于为什么这么麻烦，是因为维持动态绑定机制需要在对象内部维护一张<strong>虚函数表</strong>，这是一个很低效的事情，所以 CPP 选择了让用户自定义。</p>
<p>一般析构函数是虚方法，这是因为如果一个父类指针指向了子类对象，而析构方法使用的是父类析构，那么属于子类的那部分就没有办法释放了。</p>
<h3 id="2-6-抽象类"><a href="#2-6-抽象类" class="headerlink" title="2.6 抽象类"></a>2.6 抽象类</h3><p>抽象类是无法被实例化的类，他只能作为父类被继承然后实例化。导致它无法实例化的原因是他含有没有被定义的方法。这类方法被称为纯虚方法，需要用 <code>=0</code>去声明。</p>
<p>具体放一个示例，里面涉及了动态绑定机制和抽象类</p>
<p><code>brass.h</code></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_BRASS_H_</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_BRASS_H_</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token comment">// Abstract Base class</span>
<span class="token keyword">class</span> <span class="token class-name">AcctABC</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>string fullName<span class="token punctuation">;</span>
	<span class="token keyword">long</span> acctNum<span class="token punctuation">;</span>
	<span class="token keyword">double</span> balance<span class="token punctuation">;</span>
<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token keyword">struct</span> <span class="token class-name">Formatting</span>
	<span class="token punctuation">{</span>
		std<span class="token double-colon punctuation">::</span>ios_base<span class="token double-colon punctuation">::</span>fmtflags flag<span class="token punctuation">;</span>
		std<span class="token double-colon punctuation">::</span>streamsize pr<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span><span class="token function">FullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> fullName<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">long</span> <span class="token function">AcctNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> acctNum<span class="token punctuation">;</span><span class="token punctuation">}</span>
	Formatting <span class="token function">SetFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Restore</span><span class="token punctuation">(</span>Formatting <span class="token operator">&amp;</span>f<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AcctABC</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s <span class="token operator">=</span> <span class="token string">"Nullbody"</span><span class="token punctuation">,</span> <span class="token keyword">long</span> an <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">double</span> bal <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token keyword">return</span> balance<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">AcctABC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Brass Account Class</span>
<span class="token keyword">class</span> <span class="token class-name">Brass</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AcctABC</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Brass</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s <span class="token operator">=</span> <span class="token string">"Nullbody"</span><span class="token punctuation">,</span> <span class="token keyword">long</span> an <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">double</span> bal <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">)</span>
		<span class="token operator">:</span> <span class="token function">AcctABC</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> an<span class="token punctuation">,</span> bal<span class="token punctuation">)</span>
	<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Brass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Brass Plus Account Class</span>
<span class="token keyword">class</span> <span class="token class-name">BrassPlus</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AcctABC</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">double</span> maxLoan<span class="token punctuation">;</span>
	<span class="token keyword">double</span> rate<span class="token punctuation">;</span>
	<span class="token keyword">double</span> owesBank<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">BrassPlus</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s <span class="token operator">=</span> <span class="token string">"Nullbody"</span><span class="token punctuation">,</span> <span class="token keyword">long</span> an <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">double</span> bal <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">,</span> 
		<span class="token keyword">double</span> ml <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0.10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">BrassPlus</span><span class="token punctuation">(</span><span class="token keyword">const</span> Brass <span class="token operator">&amp;</span>ba<span class="token punctuation">,</span> <span class="token keyword">double</span> m1 <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">0.10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">ResetMax</span><span class="token punctuation">(</span><span class="token keyword">double</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>maxLoan <span class="token operator">=</span> m<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">ResetRate</span><span class="token punctuation">(</span><span class="token keyword">double</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>rate <span class="token operator">=</span> r<span class="token punctuation">;</span><span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">ResetOwes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>owesBank <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>brass.cpp</code></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"brass.h"</span></span>

<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>cout<span class="token punctuation">;</span>
<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">;</span>
<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>ios_base<span class="token punctuation">;</span>

<span class="token comment">// format print</span>
<span class="token keyword">typedef</span> std<span class="token double-colon punctuation">::</span>ios_base<span class="token double-colon punctuation">::</span>fmtflags format<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> std<span class="token double-colon punctuation">::</span>streamsize precis<span class="token punctuation">;</span>
format <span class="token function">setFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">restore</span><span class="token punctuation">(</span>format f<span class="token punctuation">,</span> precis p<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// Abstract Base Class</span>
<span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">AcctABC</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">long</span> an<span class="token punctuation">,</span> <span class="token keyword">double</span> bal<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	fullName <span class="token operator">=</span> s<span class="token punctuation">;</span>
	acctNum <span class="token operator">=</span> an<span class="token punctuation">;</span>
	balance <span class="token operator">=</span> bal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>amt <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Negative deposit not allowed; "</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"deposit is canceled\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		balance <span class="token operator">+=</span> amt<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// pure virtual function also can be defined</span>
<span class="token keyword">void</span> <span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	balance <span class="token operator">-=</span> amt<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// protected methods for formatting</span>
AcctABC<span class="token double-colon punctuation">::</span>Formatting <span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">SetFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	<span class="token comment">// set up ###.## format</span>
	Formatting f<span class="token punctuation">;</span>
	f<span class="token punctuation">.</span>flag <span class="token operator">=</span> cout<span class="token punctuation">.</span><span class="token function">setf</span><span class="token punctuation">(</span>ios_base<span class="token double-colon punctuation">::</span>fixed<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>floatfield<span class="token punctuation">)</span><span class="token punctuation">;</span>
	f<span class="token punctuation">.</span>pr <span class="token operator">=</span> cout<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Restore</span><span class="token punctuation">(</span>Formatting <span class="token operator">&amp;</span>f<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	cout<span class="token punctuation">.</span><span class="token function">setf</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>flag<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>floatfield<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>pr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Brass methods</span>
<span class="token keyword">void</span> <span class="token class-name">Brass</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span>
<span class="token punctuation">{</span>	
	<span class="token keyword">if</span> <span class="token punctuation">(</span>amt <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Withdrawal amount must be positive.\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>amt <span class="token operator">&lt;=</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span>amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Withdrawal amount of $ "</span> <span class="token operator">&lt;&lt;</span> amt <span class="token operator">&lt;&lt;</span> <span class="token string">" exceeds your balance.\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">Brass</span><span class="token double-colon punctuation">::</span><span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	Formatting f <span class="token operator">=</span> <span class="token function">SetFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Brass Client: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">FullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Account Number: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">AcctNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Balance $"</span> <span class="token operator">&lt;&lt;</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">Restore</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>

<span class="token comment">// BrassPlus methods</span>
<span class="token class-name">BrassPlus</span><span class="token double-colon punctuation">::</span><span class="token function">BrassPlus</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">long</span> an<span class="token punctuation">,</span> <span class="token keyword">double</span> bal<span class="token punctuation">,</span> <span class="token keyword">double</span> ml<span class="token punctuation">,</span> <span class="token keyword">double</span> r<span class="token punctuation">)</span>
<span class="token operator">:</span> <span class="token function">AcctABC</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> an<span class="token punctuation">,</span> bal<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	maxLoan <span class="token operator">=</span> ml<span class="token punctuation">;</span>
	owesBank <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
	rate <span class="token operator">=</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">BrassPlus</span><span class="token double-colon punctuation">::</span><span class="token function">BrassPlus</span><span class="token punctuation">(</span><span class="token keyword">const</span> Brass <span class="token operator">&amp;</span>ba<span class="token punctuation">,</span> <span class="token keyword">double</span> ml<span class="token punctuation">,</span> <span class="token keyword">double</span> r<span class="token punctuation">)</span>
<span class="token operator">:</span> <span class="token function">AcctABC</span><span class="token punctuation">(</span>ba<span class="token punctuation">)</span> <span class="token comment">// use implicit copy constructor</span>
<span class="token punctuation">{</span>
	maxLoan <span class="token operator">=</span> ml<span class="token punctuation">;</span>
	owesBank <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
	rate <span class="token operator">=</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">BrassPlus</span><span class="token double-colon punctuation">::</span><span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	Formatting f <span class="token operator">=</span> <span class="token function">SetFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"BrassPlus Client: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">FullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Accout Number: "</span> <span class="token operator">&lt;&lt;</span> <span class="token function">AcctNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Balance: $"</span> <span class="token operator">&lt;&lt;</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Maximum loan: $"</span> <span class="token operator">&lt;&lt;</span> maxLoan <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Owed to bank: $"</span> <span class="token operator">&lt;&lt;</span> owesBank <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout<span class="token punctuation">.</span><span class="token function">precision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Loan Rate: "</span> <span class="token operator">&lt;&lt;</span> <span class="token number">100</span> <span class="token operator">*</span> rate <span class="token operator">&lt;&lt;</span> <span class="token string">"%\n"</span><span class="token punctuation">;</span>
	<span class="token function">Restore</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">BrassPlus</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token keyword">double</span> amt<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Formatting f <span class="token operator">=</span> <span class="token function">SetFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span> bal <span class="token operator">=</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span>amt <span class="token operator">&lt;=</span> bal<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span>amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>amt <span class="token operator">&lt;=</span> bal <span class="token operator">+</span> maxLoan <span class="token operator">-</span> owesBank<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">double</span> advanced <span class="token operator">=</span> amt <span class="token operator">-</span> bal<span class="token punctuation">;</span>
		owesBank <span class="token operator">+=</span> advanced <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">+</span> rate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Bank advance: $"</span> <span class="token operator">&lt;&lt;</span> advanced <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Finance charge: $"</span> <span class="token operator">&lt;&lt;</span> advanced <span class="token operator">*</span> rate <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token function">Deposit</span><span class="token punctuation">(</span>advanced<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">AcctABC</span><span class="token double-colon punctuation">::</span><span class="token function">Withdraw</span><span class="token punctuation">(</span>amt<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Withdrawal amount of $ "</span> <span class="token operator">&lt;&lt;</span> amt <span class="token operator">&lt;&lt;</span> <span class="token string">" exceeds your balance.\n"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>main.cpp</code></p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"brass.h"</span></span>

<span class="token keyword">const</span> <span class="token keyword">int</span> CLIENTS <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
	<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">;</span>
	<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>cout<span class="token punctuation">;</span>
	<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	
	AcctABC <span class="token operator">*</span>p_clients<span class="token punctuation">[</span>CLIENTS<span class="token punctuation">]</span><span class="token punctuation">;</span>
	std<span class="token double-colon punctuation">::</span>string tmp<span class="token punctuation">;</span>
	<span class="token keyword">long</span> tmpNum<span class="token punctuation">;</span>
	<span class="token keyword">double</span> tmpBal<span class="token punctuation">;</span>
	<span class="token keyword">char</span> kind<span class="token punctuation">;</span>
	
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> CLIENTS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter client's name: "</span><span class="token punctuation">;</span>
		<span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter client's account number: "</span><span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> tmpNum<span class="token punctuation">;</span>
		
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter opening balance: $"</span><span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> tmpBal<span class="token punctuation">;</span>
		
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter 1 fo Brass Account or 2 for BrassPlus Account: "</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cin <span class="token operator">&gt;&gt;</span> kind <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>kind <span class="token operator">!=</span> <span class="token string">'1'</span> <span class="token operator">&amp;&amp;</span> kind <span class="token operator">!=</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter either 1 or 2: "</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span>kind <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			p_clients<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Brass</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> tmpNum<span class="token punctuation">,</span> tmpBal<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">double</span> tmax<span class="token punctuation">,</span> trate<span class="token punctuation">;</span>
			
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter the overdraft limit: $"</span><span class="token punctuation">;</span>
			cin <span class="token operator">&gt;&gt;</span> tmax<span class="token punctuation">;</span>
			
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Enter the interest rate as a decimal fraction: "</span><span class="token punctuation">;</span>
			cin <span class="token operator">&gt;&gt;</span> trate<span class="token punctuation">;</span>
			
			p_clients<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BrassPlus</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> tmpNum<span class="token punctuation">,</span> tmpBal<span class="token punctuation">,</span> tmax<span class="token punctuation">,</span> trate<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">continue</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> CLIENTS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		p_clients<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">ViewAcct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> CLIENTS<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">delete</span> p_clients<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Done.\n"</span><span class="token punctuation">;</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="三、特点操作"><a href="#三、特点操作" class="headerlink" title="三、特点操作"></a>三、特点操作</h2><h3 id="3-1-类型转换"><a href="#3-1-类型转换" class="headerlink" title="3.1 类型转换"></a>3.1 类型转换</h3><p>这个是个很神奇的地方，就是基本上什么类型都可以给对象赋值，只要定义了相关的单参量的构造函数。大概这样</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
	y <span class="token operator">=</span> xx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Node a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这就能跑了，而且跑起来还贼对。最离谱的还有这样的</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	y <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">strlen</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 依然可以跑，输出“13， -13”</span>
Node a <span class="token operator">=</span> <span class="token string">"Hello, world."</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到，基本上只要是有定义，就可以跑。</p>
<h3 id="3-2-初始化列表"><a href="#3-2-初始化列表" class="headerlink" title="3.2 初始化列表"></a>3.2 初始化列表</h3><p>对于构造函数，其实现开辟一块内存空间，然后再执行构造函数，所以其实对于每个数据成员，构造函数的赋值都不是初始化。如果是这样的话，那么如果数据成员有 <code>const</code> 常量的话，就会报错</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Node</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">enum</span><span class="token punctuation">{</span>aa <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> bb <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token comment">// 这里报错“uninitialized const int”</span>
<span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	x <span class="token operator">=</span> xx<span class="token punctuation">;</span>
	y <span class="token operator">=</span> xx<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>所以就需要初始化列表来辅助，把构造函数改成这样</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> xx<span class="token punctuation">)</span>
<span class="token operator">:</span><span class="token function">x</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>初始化列表就是在开辟内存空间的时候进行的一次初始化，所以是可以的，我们即使不使用 const，也尽量在初始化列表中初始化数据成员，因为比较高效。</p>
<h3 id="3-3-内联函数"><a href="#3-3-内联函数" class="headerlink" title="3.3 内联函数"></a>3.3 内联函数</h3><p>在类声明中定义的函数会被自动设置成内联函数，一般的 <code>getter</code> 和 <code>setter</code> 都是内联函数。</p>
<p>这个特性是十分有必要的，类声明在头文件中，如果不是内联函数，很有可能出现定义多次的情况。</p>
<h3 id="3-4-运算符重载"><a href="#3-4-运算符重载" class="headerlink" title="3.4 运算符重载"></a>3.4 运算符重载</h3><p>其实运算符可以看做一种函数，只要稍微有点离散基础的人，都可以很好的理解这件事情。所以就不细讲了。只说一下声明格式</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">returnType <span class="token keyword">operator</span> <span class="token function">op</span><span class="token punctuation">(</span>argument<span class="token operator">-</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>当对象使用重载运算符的时候，其实就是在使用第二行这个函数。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">object op arguments<span class="token punctuation">;</span>
ogject<span class="token punctuation">.</span><span class="token function">op</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="3-5-友元函数"><a href="#3-5-友元函数" class="headerlink" title="3.5 友元函数"></a>3.5 友元函数</h3><p>上面的运算符有一个问题，就是对于二元运算符，它要求对象一定是前面那个运算数。《C++ Primer Plus》中讲到一个有意思的东西，对于时间，我们定义一个乘法重载</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Time <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">double</span> n<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后就会发生一个滑稽的事情，就是不再满足乘法分配律</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">timer <span class="token operator">*</span> <span class="token number">12</span><span class="token punctuation">;</span>			<span class="token comment">// VALID 'timer * 12' equals 'timer.operator*(12)' </span>
<span class="token number">12</span> <span class="token operator">*</span> timer			<span class="token comment">// INVALID</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>所以没有办法，我们只能再定义一个友元函数来改这个疏忽。所谓的友元函数就是对于私有的数据成员依然具有可见性的函数。他们同样需要在类声明中声明，并用关键词 <code>friend</code> 修饰 ，示例如下</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Time</span>
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">int</span> hours<span class="token punctuation">;</span>
	<span class="token keyword">int</span> minutes<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Time</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">,</span> <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">AddMin</span><span class="token punctuation">(</span><span class="token keyword">int</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">AddHr</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Reset</span><span class="token punctuation">(</span><span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Time <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">const</span> Time <span class="token operator">&amp;</span> t<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	Time <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">double</span> n<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
	<span class="token keyword">friend</span> Time <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">double</span> m<span class="token punctuation">,</span> <span class="token keyword">const</span> Time <span class="token operator">&amp;</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>					 <span class="token comment">// 友元函数</span>
	<span class="token keyword">friend</span> std<span class="token double-colon punctuation">::</span>ostream <span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>ostream <span class="token operator">&amp;</span> os<span class="token punctuation">,</span> <span class="token keyword">const</span> Time <span class="token operator">&amp;</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 友元函数</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>具体的定义如下</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">Time <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">double</span> mult<span class="token punctuation">,</span> <span class="token keyword">const</span> Time <span class="token operator">&amp;</span> t<span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
	Time result<span class="token punctuation">;</span>
	<span class="token keyword">long</span> totalminutes <span class="token operator">=</span> t<span class="token punctuation">.</span>hours <span class="token operator">*</span> mult <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">+</span> t<span class="token punctuation">.</span>minutes <span class="token operator">*</span> mult<span class="token punctuation">;</span>
	result<span class="token punctuation">.</span>hours <span class="token operator">=</span> totalminutes <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span>
	result<span class="token punctuation">.</span>minutes <span class="token operator">=</span> totalminutes <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到它是可以使用类内部的数据成员的。</p>
<h3 id="3-6-const-方法"><a href="#3-6-const-方法" class="headerlink" title="3.6 const 方法"></a>3.6 const 方法</h3><p>对于一个 const 的对象，使用方法的时候是需要仔细考量的，比如说对于一个打印方法</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> aa <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> bb <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>即使没有修改数据成员的值，但是在执行下面语句的时候，依然是会报错的</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> Node a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">// INVALID 'descard qualifiers'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这是很好理解的，在前面对 <code>const</code> 的介绍中，我们指出，不是真的没修改就没问题，而是我们必须显式的声明不会修改。所以我们得操作一下。但是问题就来了，因为对象的数据成员是<strong>隐式</strong>调用的，我们没有显式的传参，所以没有参数给咱们 <code>const</code> 修饰。</p>
<p>所以最后我们的处理办法是在函数的结尾写一个 <code>const</code>。注意声明处和定义处都是需要书写的</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>	

<span class="token keyword">void</span> <span class="token class-name">Node</span><span class="token double-colon punctuation">::</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	cout <span class="token operator">&lt;&lt;</span> x <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> y <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> aa <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> bb <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-7-组合、私有继承、保护继承"><a href="#3-7-组合、私有继承、保护继承" class="headerlink" title="3.7 组合、私有继承、保护继承"></a>3.7 组合、私有继承、保护继承</h3><p>如果想要讨论私有继承，首先先补充一些访问权限的知识，CPP 中访问权限分为 3 种，而访问场景可以分为 4 种，列表如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>种类 / 情形</th>
<th>类内访问</th>
<th>友元访问</th>
<th>子类内访问</th>
<th>实例访问</th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
</tr>
<tr>
<td>protected</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
</tr>
<tr>
<td>private</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
</tr>
</tbody>
</table>
</div>
<p>也就是说，权限并不限制<strong>类内访问和友元访问</strong>这两种形式，只有 <code>public</code> 可实现实例访问，<code>protected</code> 不能被实例访问，所以一般在类内的 <code>typedef</code> 和 <code>friend</code> 会用 <code>protected</code> 修饰，因为这些声明本身也不应当通过实例访问。</p>
<p>我们知道权限控制的对象有两个，一个是数据，另一个是方法，对于这一节有用的是对于方法的权限控制，如果一个方法是 <code>public</code> 的，那么就意味着我们可以通过它的实例调用这个方法，其本质是这个实例承担了这个 <code>public</code> 方法对应的<strong>责任</strong> 。权限控制的本质是责任的控制。而如果一个方法是 <code>private</code> 的，那么这个方法并不意味着一种责任（这就好像白大褂要是穿到街上，那么就意味着救死扶伤的责任，而只在家里穿，未尝不是一种 cosplay ）。而当我们谈到继承的时候，衍生类如果和基类保持一种 <code>is-a</code> 的关系，那么就意味着，衍生类继承了基类的责任。</p>
<p>而 3 种继承的本质是“在衍生类中修改或者保持基类权限”，这种修改的是“以严为准的”，如下所示：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>继承方式 / 基类权限</th>
<th>public</th>
<th>protected</th>
<th>private</th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>public</td>
<td>protected</td>
<td>private</td>
</tr>
<tr>
<td>protected</td>
<td>protected</td>
<td>protected</td>
<td>private</td>
</tr>
<tr>
<td>private</td>
<td>private</td>
<td>private</td>
<td>private</td>
</tr>
</tbody>
</table>
</div>
<p>表格中的内容是衍生类继承的数据和方法在衍生类中的权限。</p>
<p>也可以理解为 <code>public</code> 继承并不会改变基类中原有的权限，而 <code>protected, private</code> 继承都会对于原有的权限进行一定的修改。他们会将原本 <code>public</code> 的方法变成严格的权限，也就是说，衍生类和基类间就不再具有 <code>is-a</code> 的关系了。也就是说，“私有继承”在逻辑上并不是一种“继承”。事实也正是如此，私有继承并不能让衍生类隐式转换成基类，如下所示：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">private</span> <span class="token class-name">Person</span></span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>     <span class="token comment">// inheritance is now private</span>
<span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person<span class="token operator">&amp;</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">// anyone can eat</span>

Person p<span class="token punctuation">;</span>                                  <span class="token comment">// p is a Person</span>
Student s<span class="token punctuation">;</span>                                 <span class="token comment">// s is a Student</span>
<span class="token function">eat</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>                                    <span class="token comment">// fine, p is a Person</span>
<span class="token function">eat</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>                                    <span class="token comment">// error! a Student isn't a Person</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>那么“私有继承”有什么用呢？我们说私有继承是<strong>软件实现</strong>中的概念，与<strong>软件设计</strong>无关。它和“组合”所表示的 <code>has-a</code> 关系相似但不同，它在实现语义上是一种 <code>is-implemented-in-terms-of</code> ，也就是说“衍生类的实现和基类很类似”。基类和衍生类可以毫无关系，但是他们在一些责任的实现上是相同的，所以他们有一个私有继承关系。</p>
<p>而在使用上，私有继承的使用方法和组合有一定的对照关系，可以看成是一种“匿名组合”，比如说调用方法时，有如下差别</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// combination</span>
component<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// private inheritance</span>
<span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在使用基类或者组件的时候</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// combination</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span>componet
<span class="token comment">// private inheritance</span>
<span class="token punctuation">(</span>Base <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>此外我们还可以用 <code>public</code> 权限声明搭配 <code>using</code> 语法来使得衍生类实现部分基类的责任：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">private</span> <span class="token class-name">Base</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">using</span> Base<span class="token double-colon punctuation">::</span>baseMethod<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Derived de<span class="token punctuation">;</span>
de<span class="token punctuation">.</span><span class="token function">baseMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-8-友元类"><a href="#3-8-友元类" class="headerlink" title="3.8 友元类"></a>3.8 友元类</h3><p>在类 A 中指明类 B 能够直接访问类 A 中的 <code>private</code> 和 <code>protected</code> 成员，那么类 B 就是类 A 的友元类。</p>
<p>声明方式如下：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">A</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>需要强调，<code>friend</code> 声明可以在 <code>public, protected, private</code> 任何一个作用域下，没有任何区别。</p>
<p>友元类具有如下性质：</p>
<ul>
<li>无法被继承，也就是如果 <code>B</code> 是 <code>A</code> 的友元，<code>subB</code> 是 <code>B</code> 的子类，不能推导出 <code>subB</code> 是 <code>A</code> 的友元。</li>
<li>无法被传递，也就是如果 <code>B</code> 是 <code>A</code> 的友元， <code>C</code> 是 <code>B</code> 的友元，不能推导出 <code>C</code> 是 <code>A</code> 的友元。</li>
</ul>
<h3 id="3-9-内部类"><a href="#3-9-内部类" class="headerlink" title="3.9 内部类"></a>3.9 内部类</h3><p>如果一个类定义在另一个类的内部，这个内部的类就叫做内部类。</p>
<p>对于 <code>OuterClass</code> ，其看待 <code>InnerClass</code> 与看待其他类并没有什么区别，并不能通过 <code>OuterClass</code> 的对象来访问 <code>Inner</code> 的数据。不过 <code>OuterClass</code> 可以实例化 <code>InnerClass</code> ，就和实例化其他类一样。在本质上，外部类无非仅仅限定了内部类类名的作用域范围。</p>
<p>对于其他类或者过程，其看待 <code>InnerClass</code> 与其声明位置有关，如果 <code>InnerClass</code> 是 <code>public</code> 的，那么可以用 <code>OuterClass::InnerClass</code> 来实例化一个内部类对象，而如果是 <code>private</code> 的，那么则无法实例化内部对象（只有 <code>OuterClass</code> 可以实例化这样的 <code>InnerClass</code> ）</p>
<p>而 <code>InnerClass</code> 是 <code>OuterClass</code> 的友元类，并不需要特殊的 <code>friend</code> 声明。但是外部类不是内部类的友元。</p>
<h3 id="3-10-成员指针"><a href="#3-10-成员指针" class="headerlink" title="3.10 成员指针"></a>3.10 成员指针</h3><p>成员指针指的是指向类成员的指针。也就是可以<strong>指向类内的某种数据类型</strong>的指针。它只能用于类的<strong>非静态成员变量</strong>。</p>
<p>举例来说</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Foo</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    DataPtr dataPtr<span class="token punctuation">;</span>
    FuncPtr funcPtr<span class="token punctuation">;</span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// member pointer for data -&gt; `int *`</span>
<span class="token keyword">using</span> DataPtr <span class="token operator">=</span> <span class="token keyword">int</span> <span class="token punctuation">(</span>Foo<span class="token double-colon punctuation">::</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// member pointer for function -&gt; `void (*)()`</span>
<span class="token keyword">using</span> FuncPtr <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>Foo<span class="token double-colon punctuation">::</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Foo f<span class="token punctuation">;</span>
    DataPtr dataPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>Foo<span class="token double-colon punctuation">::</span>data<span class="token punctuation">;</span>
    FuncPtr funcPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>Foo<span class="token double-colon punctuation">::</span>func<span class="token punctuation">;</span>
    <span class="token keyword">auto</span> pf <span class="token operator">=</span> <span class="token operator">&amp;</span>f<span class="token punctuation">;</span>
    <span class="token comment">// `.*` and `-&gt;*`</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">.</span><span class="token operator">*</span>dataPtr <span class="token operator">&lt;&lt;</span> pf<span class="token operator">-&gt;</span><span class="token operator">*</span>dataPtr <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到在类型声明阶段，在原来的类型声明前加上了类名 <code>Foo</code> ：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// member pointer for data -&gt; `int *`</span>
<span class="token keyword">using</span> DataPtr <span class="token operator">=</span> <span class="token keyword">int</span> <span class="token punctuation">(</span>Foo<span class="token double-colon punctuation">::</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// member pointer for function -&gt; `void (*)()`</span>
<span class="token keyword">using</span> FuncPtr <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>Foo<span class="token double-colon punctuation">::</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>这种类型的指针并不会指向具体的内容，而是会指向某个类内成员的类型，如下所示：</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp">DataPtr dataPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>Foo<span class="token double-colon punctuation">::</span>data<span class="token punctuation">;</span>
FuncPtr funcPtr <span class="token operator">=</span> <span class="token operator">&amp;</span>Foo<span class="token double-colon punctuation">::</span>func<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>正因如此，这种类型的指针在读写其指向的内容的时候，并不能直接使用 <code>*ptr</code> ，而必须与相应的实例相结合才能发挥作用，同时需要使用特殊的运算符 <code>.*</code> 和 <code>-&gt;*</code> 。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">// same as `f.data` and `f.data`</span>
std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> f<span class="token punctuation">.</span><span class="token operator">*</span>dataPtr <span class="token operator">&lt;&lt;</span> pf<span class="token operator">-&gt;</span><span class="token operator">*</span>dataPtr <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>从本质来说，成员指针描述了<strong>特定成员的位置距离实例的起点有多少个字节</strong> 。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CPP%E8%AE%BE%E8%AE%A1/" rel="tag"><i class="fa fa-tag"></i> CPP设计</a>
              <a href="/tags/S4%E8%AF%BE%E4%B8%8A/" rel="tag"><i class="fa fa-tag"></i> S4课上</a>
              <a href="/tags/%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" rel="tag"><i class="fa fa-tag"></i> 知识总结</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/1a401c6d/" rel="prev" title="CPP设计-寸步难行">
      <i class="fa fa-chevron-left"></i> CPP设计-寸步难行
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/ad223710/" rel="next" title="CPP设计-元编程">
      CPP设计-元编程 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
<script src="https://utteranc.es/client.js"
        repo="Thysrael/blog-comment"
        issue-term="title"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95"><span class="nav-text">一、默认方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E6%80%BB%E8%AE%BA"><span class="nav-text">1.1 总论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E9%BB%98%E8%AE%A4%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="nav-text">1.2 默认构造函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E9%BB%98%E8%AE%A4%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="nav-text">1.3 默认析构函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E5%A4%8D%E5%88%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-text">1.4 复制构造函数和赋值运算符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">二、基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="nav-text">2.1 定义一个对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E7%B1%BB%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-text">2.2 类的结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F"><span class="nav-text">2.3 类的静态量和常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E5%85%AC%E6%9C%89%E7%BB%A7%E6%89%BF"><span class="nav-text">2.4 公有继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A"><span class="nav-text">2.5 动态绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="nav-text">2.6 抽象类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E7%89%B9%E7%82%B9%E6%93%8D%E4%BD%9C"><span class="nav-text">三、特点操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-text">3.1 类型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="nav-text">3.2 初始化列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0"><span class="nav-text">3.3 内联函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="nav-text">3.4 运算符重载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E5%8F%8B%E5%85%83%E5%87%BD%E6%95%B0"><span class="nav-text">3.5 友元函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-const-%E6%96%B9%E6%B3%95"><span class="nav-text">3.6 const 方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-%E7%BB%84%E5%90%88%E3%80%81%E7%A7%81%E6%9C%89%E7%BB%A7%E6%89%BF%E3%80%81%E4%BF%9D%E6%8A%A4%E7%BB%A7%E6%89%BF"><span class="nav-text">3.7 组合、私有继承、保护继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-%E5%8F%8B%E5%85%83%E7%B1%BB"><span class="nav-text">3.8 友元类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-%E5%86%85%E9%83%A8%E7%B1%BB"><span class="nav-text">3.9 内部类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-%E6%88%90%E5%91%98%E6%8C%87%E9%92%88"><span class="nav-text">3.10 成员指针</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Thysrael"
      src="/images/avatar2.png">
  <p class="site-author-name" itemprop="name">Thysrael</p>
  <div class="site-description" itemprop="description">Can you hear me ?</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">197</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">69</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="">
    <a target="_blank" class="social-link" href="/atom.xml" style="color: burlywood;">
      <span class="icon">
        <i class="fa fa-rss"></i>
      </span>
      <span class="label">RSS</span>
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/thysrael" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;thysrael" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:thysrael@163.com" title="E-Mail → mailto:thysrael@163.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021.12.18 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Thysrael</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">1.3m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">20:02</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
